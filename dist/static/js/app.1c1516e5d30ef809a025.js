webpackJsonp([1],{"/626":function(t,e){},"3R/k":function(t,e){},"3TcT":function(t,e){},"6nfk":function(t,e){},"7EwS":function(t,e){},"90VL":function(t,e){},"9DHQ":function(t,e){},FbEL:function(t,e){},"HNa/":function(t,e){},JLzs:function(t,e){},LGiM:function(t,e){},"N+IJ":function(t,e){},NHnr:function(t,e,a){"use strict";function n(){Ut.authorize({responseType:"token id_token",redirectUri:window.location.protocol+"//"+window.location.host+"/callback",audience:"https://awesome-tours-demo.auth0.com/api/v2/",scope:It})}function r(){s(),u(),window.location.href="/"}function o(t,e,a){v()?a():n()}function i(){return localStorage.getItem(Lt)}function c(){return localStorage.getItem(Ot)}function s(){localStorage.removeItem(Lt)}function u(){localStorage.removeItem(Ot)}function l(t){var e=RegExp("[#&]"+t+"=([^&]*)").exec(window.location.hash);return e&&decodeURIComponent(e[1].replace(/\+/g," "))}function d(){var t=l("access_token");localStorage.setItem(Ot,t)}function f(){var t=l("id_token");localStorage.setItem(Lt,t)}function v(){var t=i();return!!t&&!g(t)}function p(t){var e=Ct()(t);if(!e.exp)return null;var a=new Date(0);return a.setUTCSeconds(e.exp),a}function g(t){return p(t)<new Date}function k(t){var e=c();Ut.client.userInfo(e,function(e,a){e?console.log(e):t(a)})}function m(){var t=Jt+"/api/tour-packages";return zt.a.get(t).then(function(t){return t.data})}function h(){var t=Jt+"/api/tour-packages/public";return zt.a.get(t).then(function(t){return t.data})}Object.defineProperty(e,"__esModule",{value:!0});var P=a("7+uW"),_=a("M+UZ"),b=a("IcMm"),x=a("rPQa"),y=a("TWha"),T=a("fYhH"),A=a("7Q1V"),w=a("7M7f"),D=a("JUsQ"),$=a("+9ps"),E=a("mLW2"),V=a("LmeB"),C=a("6/SM"),S=a("f/u0"),R=a("DDBM"),I=a("/yi5"),L=a("MPXs"),O=a("RWpw"),U=a("7gKz"),F=a("UxJg"),G=a("z8aH"),j=a("QLUw"),K=a("6VHA"),N=(a("s6ZO"),a("fZjL")),B=a.n(N),H=a("Dd8w"),M=a.n(H),q=a("NYxO"),z={computed:M()({},Object(q.b)(["profile"]),{tabs:function(){return B()(this.profile).length?[{path:"/",title:"Public Tour Packages"},{path:"/exclusive",title:"Private Tour Packages"},{path:"/create",title:"Add Tour Package"}]:[{path:"/",title:"Tour Packages"}]}}),data:function(){return{fixed:!1,title:"Awesome Tours!",loading:!0}},mounted:function(){var t=this;this.loading=!0,this.$store.dispatch("getProfile"),this.$store.dispatch("getTourPackages",function(){t.loading=!1})},methods:{handleLogin:function(){this.$store.dispatch("login")},handleLogout:function(){this.$store.dispatch("logout")}}},J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{dark:""}},[a("v-toolbar",{attrs:{dense:"",dark:""}},[a("v-tabs",[a("v-tabs-bar",{attrs:{dark:""}},[a("v-tabs-slider",{attrs:{color:"amber darken-3"}}),t._v(" "),a("v-tabs-item",{staticClass:"title amber--text text--darken-3",attrs:{to:"/",replace:"",router:""}},[t._v("\n            "+t._s(t.title)+"\n        ")]),t._v(" "),t._l(t.tabs,function(e,n){return a("v-tabs-item",{key:n,staticClass:"hidden-xs-only",attrs:{to:e.path,replace:"",router:""}},[t._v("\n        "+t._s(e.title)+"\n        ")])})],2)],1),t._v(" "),a("v-spacer"),t._v(" "),Object.keys(t.profile).length?[a("v-avatar",{staticClass:"mr-2",attrs:{size:"35px"},on:{click:t.handleLogout}},[a("img",{attrs:{src:t.profile.picture,alt:t.profile.given_name}})]),t._v(" "),a("v-btn",{staticClass:"hidden-sm-and-down",attrs:{flat:""},on:{click:t.handleLogout}},[t._v("Logout")])]:a("v-btn",{staticClass:"mr-0",attrs:{flat:""},on:{click:t.handleLogin}},[a("v-icon",[t._v("account_circle")]),a("span",{staticClass:"hidden-sm-and-down"},[t._v("  Admin Login")])],1)],2),t._v(" "),a("v-parallax",{attrs:{src:"/static/images/sunset.jpg",height:"320"}},[a("v-layout",{attrs:{column:"","align-center":"","justify-center":""}},[a("h1",{staticClass:"white--text text--darken-4 display-2"},[a("i",[t._v("Adventure awaits the brave!")])])])],1),t._v(" "),a("v-content",[a("router-view",[a("v-container",{attrs:{fluid:""}})],1)],1),t._v(" "),t.loading?a("v-flex",{attrs:{"md-1":"","offset-md6":"","sm-2":"","offset-sm5":"","xs-2":"","offset-xs5":""}},[a("v-progress-circular",{attrs:{indeterminate:"",size:70,width:7,color:"orange"}})],1):t._e(),t._v(" "),a("v-footer",{attrs:{fixed:t.fixed,app:""}},[a("span",[t._v("© 2017")])])],1)},Q=[],W={render:J,staticRenderFns:Q},Z=W,X=a("VU/8"),Y=X(z,Z,!1,null,null,null),tt=Y.exports,et=a("/ocq"),at={props:["type"],data:function(){return{dialog:!1,id:null}},computed:Object(q.b)(["tourPackages","currency"]),methods:{remove:function(t){this.dialog=!0,this.id=t}}},nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:"","grid-list-xl":""}},[a("v-layout",{attrs:{row:"",wrap:""}},t._l(t.tourPackages.filter(function(e){return e.type===t.type}),function(e,n){return a("v-flex",{key:n,attrs:{sm6:"",md4:"",lg4:"",xl3:""}},[a("TourPackageCard",{attrs:{tourPackage:e},on:{remove:t.remove}})],1)})),t._v(" "),a("DeleteTourPackageDialog",{attrs:{dialog:t.dialog,id:t.id,type:t.type},on:{close:function(e){t.dialog=!1}}})],1)},rt=[],ot={render:nt,staticRenderFns:rt},it=ot,ct=a("VU/8"),st=ct(at,it,!1,null,null,null),ut=st.exports,lt=a("Xxa5"),dt=a.n(lt),ft=a("exGp"),vt=a.n(ft),pt={data:function(){var t={name:"Unnamed Tour",details:"Add Tour details here",image:"background.jpg",rates:[{noOfPersons:1,amount:900}],type:!1};return{initial:t,tourPackage:t,dialog:!1,snackbar:!1}},computed:Object(q.b)(["currency","tourPackages"]),watch:{"$route.name":"refresh"},mounted:function(){this.refresh()},methods:{refresh:function(){var t=this;return vt()(dt.a.mark(function e(){var a;return dt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("TourPackageItem"!==t.$route.name){e.next=8;break}if(t.tourPackages.length){e.next=4;break}return e.next=4,t.$store.dispatch("getTourPackages");case 4:a=t.$store.getters.getTourPackageById(t.$route.params.id),a&&(t.tourPackage=a,t.tourPackage.type="private"===t.tourPackage.type),e.next=9;break;case 8:t.tourPackage=t.initial;case 9:case"end":return e.stop()}},e,t)}))()},updateRate:function(t,e){this.tourPackage.rates[t]=M()({},this.tourPackage.rates[t],e)},removeRate:function(t){this.tourPackage.rates=this.tourPackage.rates.filter(function(e,a){return a!==t})},addRate:function(){this.tourPackage.rates.push({noOfPersons:1,amount:900})},update:function(){var t=M()({},this.tourPackage,{type:this.tourPackage.type?"private":"public"});this.$store.commit("UPDATE_PACKAGE",{id:this.$route.params.id,tourPackage:t}),this.snackbar=!0},create:function(){var t=this;return vt()(dt.a.mark(function e(){var a;return dt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=M()({},t.tourPackage,{type:t.tourPackage.type?"private":"public"}),e.next=3,t.$store.dispatch("createTourPackage",a);case 3:t.snackbar=!0;case 4:case"end":return e.stop()}},e,t)}))()},submit:function(){this.$route.params.id?this.update():this.create()},closeSnackbar:function(){this.snackbar=!1,this.tourPackage.type?this.$router.replace("/exclusive"):this.$router.replace("/")}}},gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",{attrs:{xs10:"","offset-xs1":"",sm6:"","offset-sm3":"","mt-5":"","mb-5":""}},[a("v-form",[a("v-text-field",{attrs:{label:"Name",required:""},model:{value:t.tourPackage.name,callback:function(e){t.$set(t.tourPackage,"name",e)},expression:"tourPackage.name"}}),t._v(" "),a("v-text-field",{attrs:{label:"Details",required:"","multi-line":""},model:{value:t.tourPackage.details,callback:function(e){t.$set(t.tourPackage,"details",e)},expression:"tourPackage.details"}}),t._v(" "),a("v-checkbox",{attrs:{label:"Exclusive Tour?",required:""},model:{value:t.tourPackage.type,callback:function(e){t.$set(t.tourPackage,"type",e)},expression:"tourPackage.type"}}),t._v(" "),a("v-list",{attrs:{"two-line":"",subheader:""}},[a("v-subheader",[t._v("Tour Rates")]),t._v(" "),t._l(t.tourPackage.rates,function(e,n){return a("v-list-tile",{key:n},[a("v-list-tile-action",[a("v-icon",{attrs:{color:"amber darken-4"}},[t._v("people")])],1),t._v(" "),a("v-list-tile-content",{staticClass:"pr-3"},[a("v-text-field",{attrs:{label:"No of Persons",value:e.noOfPersons,mask:"###",required:""},on:{input:function(e){return t.updateRate(n,{noOfPersons:e})}}})],1),t._v(" "),a("v-list-tile-content",[a("v-text-field",{attrs:{label:"Amount",value:e.amount,prefix:t.currency,required:""},on:{input:function(e){return t.updateRate(n,{amount:e})}}})],1),t._v(" "),a("v-list-tile-action",[a("v-btn",{attrs:{icon:""},on:{click:function(e){t.removeRate(n)}}},[a("v-icon",{attrs:{color:"red"}},[t._v("delete")])],1)],1)],1)}),t._v(" "),a("v-list-tile",[a("v-btn",{on:{click:t.addRate}},[a("v-icon",{attrs:{color:"green"}},[t._v("add")]),t._v(" Add Rate ")],1)],1)],2),t._v(" "),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.submit}},[t._v(t._s(t.$route.params.id?"Update":"Create"))]),t._v(" "),t.$route.params.id?a("v-btn",{attrs:{color:"red",flat:""},on:{click:function(e){e.stopPropagation(),t.dialog=!0}}},[t._v("Delete Tour Package")]):t._e()],1),t._v(" "),a("v-snackbar",{attrs:{timeout:6e3,top:"",vertical:""},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t.$route.params.id?a("span",[t._v("Successfully updated Tour Package.")]):a("span",[t._v("Successfully created Tour Package.")]),t._v(" "),a("v-btn",{attrs:{flat:"",color:"pink"},nativeOn:{click:function(e){t.closeSnackbar(e)}}},[t._v("Close")])],1),t._v(" "),a("DeleteTourPackageDialog",{attrs:{dialog:t.dialog,id:t.$route.params.id,type:t.tourPackage.type?"private":"public"},on:{close:function(e){t.dialog=!1}}})],1)},kt=[],mt={render:gt,staticRenderFns:kt},ht=mt,Pt=a("VU/8"),_t=Pt(pt,ht,!1,null,null,null),bt=_t.exports,xt={name:"",mounted:function(){var t=this;this.$nextTick(function(){t.$store.dispatch("afterLogin"),t.$router.replace("/")})}},yt=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},Tt=[],At={render:yt,staticRenderFns:Tt},wt=At,Dt=a("VU/8"),$t=Dt(xt,wt,!1,null,null,null),Et=$t.exports,Vt=a("ytdl"),Ct=a.n(Vt),St=a("2fyi"),Rt=a.n(St),It="openid profile email",Lt="id_token",Ot="access_token",Ut=new Rt.a.WebAuth({clientID:"062ZuI9PkskSIlGO4lB0Jc40af5t67GY",domain:"awesome-tours-demo.auth0.com",scope:It});P.a.use(et.a);var Ft,Gt=new et.a({mode:"history",routes:[{path:"/",name:"TourPackages",component:ut,props:{type:"public"}},{path:"/exclusive",beforeEnter:o,name:"PrivateTourPackages",component:ut,props:{type:"private"}},{path:"/create",beforeEnter:o,name:"CreateTourPackage",component:bt},{path:"/tour/:id",beforeEnter:o,name:"TourPackageItem",component:bt},{path:"/callback",component:Et}]}),jt=a("bOdI"),Kt=a.n(jt),Nt=(Ft={},Kt()(Ft,"ADD_PACKAGES",function(t,e){t.tourPackages=e}),Kt()(Ft,"ADD_PACKAGE",function(t,e){t.tourPackages.push(e)}),Kt()(Ft,"UPDATE_PACKAGE",function(t,e){var a=e.id,n=e.tourPackage,r=t.tourPackages.findIndex(function(t){return t.id.toString()===a.toString()});t.tourPackages[r]=M()({},t.tourPackages[r],n)}),Kt()(Ft,"DELETE_PACKAGE",function(t,e){t.tourPackages=t.tourPackages.filter(function(t){return t.id.toString()!==e.toString()})}),Kt()(Ft,"UPDATE_PROFILE",function(t,e){t.profile=e}),Ft),Bt={getTourPackageById:function(t,e){return function(e){return t.tourPackages.find(function(t){return t.id.toString()===e.toString()})}}},Ht=a("//Fk"),Mt=a.n(Ht),qt=a("mtWM"),zt=a.n(qt),Jt="https://awesometours-api.herokuapp.com",Qt={getTourPackages:function(t,e){var a=this,n=t.commit;return vt()(dt.a.mark(function t(){return dt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!v()){t.next=5;break}return t.next=3,m().then(function(t){n("ADD_PACKAGES",t),"function"==typeof e&&e(t)});case 3:t.next=7;break;case 5:return t.next=7,h().then(function(t){n("ADD_PACKAGES",t),"function"==typeof e&&e(t)});case 7:case"end":return t.stop()}},t,a)}))()},createTourPackage:function(t,e){var a=t.commit,n=t.state,r=1;return n.tourPackages.length&&(r=n.tourPackages[n.tourPackages.length-1].id+1),e.id=r,a("ADD_PACKAGE",e),Mt.a.resolve({tourPackage:e})},login:function(t){t.commit;n()},logout:function(t){var e=t.commit;r(),e("UPDATE_PROFILE",{})},afterLogin:function(t){var e=t.dispatch;d(),f(),e("getProfile"),e("getTourPackages")},getProfile:function(t){var e=t.commit;v()&&k(function(t){e("UPDATE_PROFILE",t)})}};P.a.use(q.a);var Wt={profile:{},currency:"PHP",tourPackages:[]},Zt=new q.a.Store({state:Wt,mutations:Nt,getters:Bt,actions:Qt}),Xt={props:["dialog","id","type"],methods:{remove:function(){this.$store.commit("DELETE_PACKAGE",this.id),this.$emit("close"),"public"===this.type?this.$router.replace("/"):this.$router.replace("/exclusive")}}},Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-text",[t._v("Delete this Tour Package?")]),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{flat:""},nativeOn:{click:function(e){t.$emit("close")}}},[t._v("Cancel")]),t._v(" "),a("v-btn",{attrs:{flat:"",color:"red"},on:{click:t.remove}},[t._v("Yes, delete this.")])],1)],1)],1)},te=[],ee={render:Yt,staticRenderFns:te},ae=ee,ne=a("VU/8"),re=ne(Xt,ae,!1,null,null,null),oe=re.exports,ie={props:["tourPackage"],computed:Object(q.b)(["profile","currency"])},ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-media",{attrs:{src:"/static/images/"+t.tourPackage.image,height:"200px"}}),t._v(" "),a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline mb-0"},[t._v(t._s(t.tourPackage.name))]),t._v(" "),a("div",[t._v(t._s(t.tourPackage.details))])])]),t._v(" "),a("v-list",[a("v-subheader",[t._v("Tour Rates")]),t._v(" "),t._l(t.tourPackage.rates,function(e,n){return a("v-list-tile",{key:n,attrs:{avatar:""},on:{click:function(t){}}},[a("v-list-tile-avatar",[a("v-icon",{attrs:{color:"amber darken-4"}},[t._v("people")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-sub-title",[t._v(t._s(e.noOfPersons))])],1),t._v(" "),a("v-list-tile-action",[a("v-list-tile-sub-title",[t._v(t._s(t.currency)+" "),a("strong",[t._v(t._s(e.amount)+" ")]),t._v(" per person")])],1)],1)})],2),t._v(" "),Object.keys(t.profile).length?a("v-card-actions",[a("v-btn",{attrs:{flat:"",to:"/tour/"+t.tourPackage.id,router:""}},[t._v("Update")]),t._v(" "),a("v-btn",{attrs:{color:"red",flat:""},on:{click:function(e){e.stopPropagation(),t.$emit("remove",t.tourPackage.id)}}},[t._v("Delete Tour Package")])],1):t._e()],1)},se=[],ue={render:ce,staticRenderFns:se},le=ue,de=a("VU/8"),fe=de(ie,le,!1,null,null,null),ve=fe.exports;P.a.use(_.a,{components:{VApp:b.a,VNavigationDrawer:x.a,VFooter:y.a,VList:T.f,VBtn:A.a,VIcon:w.a,VGrid:D.a,VToolbar:$.a,VParallax:E.a,VDataTable:V.a,VTabs:C.a,VCard:S.a,VForm:R.a,VTextField:I.a,VDialog:L.a,VAvatar:O.a,VSubheader:U.a,VSnackbar:F.a,VCheckbox:G.a,VProgressCircular:j.a,transitions:K.h}}),P.a.component("DeleteTourPackageDialog",oe),P.a.component("TourPackageCard",ve),P.a.config.productionTip=!1,new P.a({el:"#app",router:Gt,store:Zt,template:"<App/>",components:{App:tt}})},NOHZ:function(t,e){},P0ba:function(t,e){},PJ2A:function(t,e){},"X05+":function(t,e){},XC5Q:function(t,e){},acBN:function(t,e){},"d/lB":function(t,e){},jQdp:function(t,e){},kP4z:function(t,e){},kVeV:function(t,e){},lThp:function(t,e){},pu2v:function(t,e){},"q/9b":function(t,e){},qRVk:function(t,e){},rzhv:function(t,e){},s6ZO:function(t,e){},sBiC:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.1c1516e5d30ef809a025.js.map